// 배치 모듈 (실행 가능한 JAR)

plugins {
    id 'org.springframework.boot'
}

dependencies {
    implementation(project(':edukit-core')) {
        // Batch에서 불필요한 의존성들 제외
        exclude group: 'io.jsonwebtoken'
        exclude group: 'org.mindrot', module: 'jbcrypt'
        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
    }
    runtimeOnly project(":edukit-external")

    // AWS Lambda
    implementation 'com.amazonaws:aws-lambda-java-core:1.3.0'
    implementation 'com.amazonaws:aws-lambda-java-events:3.16.1'
    
    // JSON 로깅 (안전한 JSON 직렬화)
    implementation 'net.logstash.logback:logstash-logback-encoder:8.0'

    // Database
    implementation 'com.mysql:mysql-connector-j'
}

// 실행 가능한 JAR 설정
jar {
    archiveBaseName = 'edukit-batch'
    archiveVersion = project.version
    enabled = false
}

bootJar {
    archiveFileName = 'app-batch.jar'  // 고정된 파일명으로 변경
} 
