// 배치 모듈 (실행 가능한 JAR)

plugins {
    id 'org.springframework.boot'
}

dependencies {
    implementation(project(':edukit-core')) {
        exclude group: 'io.jsonwebtoken'
        exclude group: 'org.mindrot', module: 'jbcrypt'
        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
    }

    implementation(project(':edukit-external')) {
        exclude group: 'org.springframework.ai'
        exclude group: 'software.amazon.awssdk', module: 's3'
        exclude group: 'io.github.resilience4j'
        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-data-redis'
        exclude group: 'io.projectreactor.netty', module: 'reactor-netty-http'
    }
    
    // AWS Lambda
    implementation 'com.amazonaws:aws-lambda-java-core:1.3.0'
    implementation 'com.amazonaws:aws-lambda-java-events:3.16.1'
    
    // JSON 로깅 (안전한 JSON 직렬화)
    implementation 'net.logstash.logback:logstash-logback-encoder:8.0'

    // Database
    implementation 'com.mysql:mysql-connector-j'
}

// 실행 가능한 JAR 설정
jar {
    archiveBaseName = 'edukit-batch'
    archiveVersion = project.version
    enabled = false
}

bootJar {
    archiveFileName = 'app-batch.jar'
} 
